pipeline{
    
    agent { label 'E2E_D_AirPlayMacMini' }
  
    stages{        

        stage("Installing Requirements & run pytest"){
            steps{
                
                sh """
                appium &
                sleep 6
                python3 -m venv test_environment
                . test_environment/bin/activate
                pip install -r requirements.txt
                python --version
                pytest Tests/test_login.py -v -s --platformname Android --udid 988a90363239513753 --platformversion 8.0.0 
                deactivate
                """
            }
        }
               
    }
        
}
